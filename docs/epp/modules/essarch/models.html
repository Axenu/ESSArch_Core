<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>essarch.models &#8212; ESSArch Preservation Platform 1.0.0 documentation</title>
    
    <link rel="stylesheet" href="../../static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../../static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '1.0.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../../static/jquery.js"></script>
    <script type="text/javascript" src="../../static/underscore.js"></script>
    <script type="text/javascript" src="../../static/doctools.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
   
  <link rel="stylesheet" href="../../static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head>
  <body role="document">
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <h1>Source code for essarch.models</h1><div class="highlight"><pre>
<span></span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    ESSArch - ESSArch is an Electronic Archive system</span>
<span class="sd">    Copyright (C) 2010-2016  ES Solutions AB</span>

<span class="sd">    This program is free software: you can redistribute it and/or modify</span>
<span class="sd">    it under the terms of the GNU General Public License as published by</span>
<span class="sd">    the Free Software Foundation, either version 3 of the License, or</span>
<span class="sd">    (at your option) any later version.</span>

<span class="sd">    This program is distributed in the hope that it will be useful,</span>
<span class="sd">    but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="sd">    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<span class="sd">    GNU General Public License for more details.</span>

<span class="sd">    You should have received a copy of the GNU General Public License</span>
<span class="sd">    along with this program.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span>

<span class="sd">    Contact information:</span>
<span class="sd">    Web - http://www.essolutions.se</span>
<span class="sd">    Email - essarch@essolutions.se</span>
<span class="sd">&#39;&#39;&#39;</span>
<span class="k">try</span><span class="p">:</span>
    <span class="kn">import</span> <span class="nn">ESSArch_EPP</span> <span class="k">as</span> <span class="nn">epp</span>
<span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
    <span class="n">__version__</span> <span class="o">=</span> <span class="s1">&#39;2&#39;</span>
<span class="k">else</span><span class="p">:</span>
    <span class="n">__version__</span> <span class="o">=</span> <span class="n">epp</span><span class="o">.</span><span class="n">__version__</span> 

<span class="kn">from</span> <span class="nn">django.db</span> <span class="k">import</span> <span class="n">models</span>
<span class="kn">from</span> <span class="nn">django</span> <span class="k">import</span> <span class="n">forms</span>
<span class="kn">from</span> <span class="nn">django.utils.safestring</span> <span class="k">import</span> <span class="n">mark_safe</span>
<span class="kn">from</span> <span class="nn">django.forms.utils</span> <span class="k">import</span> <span class="n">flatatt</span>
<span class="kn">from</span> <span class="nn">django.core.urlresolvers</span> <span class="k">import</span> <span class="n">reverse</span>
<span class="kn">from</span> <span class="nn">django.conf</span> <span class="k">import</span> <span class="n">settings</span>
<span class="kn">from</span> <span class="nn">django.utils.translation</span> <span class="k">import</span> <span class="n">ugettext_lazy</span> <span class="k">as</span> <span class="n">_</span>
<span class="kn">from</span> <span class="nn">picklefield.fields</span> <span class="k">import</span> <span class="n">PickledObjectField</span>
<span class="kn">from</span> <span class="nn">essarch.fields</span> <span class="k">import</span> <span class="n">BigAutoField</span>
<span class="kn">import</span> <span class="nn">uuid</span>

<span class="c1">###########################################################################</span>
<span class="c1">#</span>
<span class="c1"># ESSArch permission model</span>
<span class="c1">#</span>
<span class="k">class</span> <span class="nc">permission</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">permissions</span> <span class="o">=</span> <span class="p">(</span>
            <span class="c1">#(&quot;ESSArch_Marieberg&quot;, &quot;site Marieberg&quot;),</span>
            <span class="c1">#(&quot;ESSArch_MKC&quot;, &quot;site MKC&quot;),</span>
            <span class="c1">#(&quot;ESSArch_SVAR&quot;, &quot;site SVAR&quot;),</span>
            <span class="c1">#(&quot;ESSArch_HLA&quot;, &quot;site HLA&quot;),</span>
            <span class="c1">#(&quot;ESSArch_Globen&quot;, &quot;site Globen&quot;),</span>
            <span class="c1">#(&quot;ESSArch_RA-OSLO&quot;, &quot;site Oslo&quot;),</span>
            <span class="p">(</span><span class="s2">&quot;essadministrate&quot;</span><span class="p">,</span> <span class="s2">&quot;ESSArch admin &quot;</span><span class="p">),</span>
            <span class="p">(</span><span class="s2">&quot;essaccess&quot;</span><span class="p">,</span> <span class="s2">&quot;ESSArch access&quot;</span><span class="p">),</span>
            <span class="p">(</span><span class="s2">&quot;essingest&quot;</span><span class="p">,</span> <span class="s2">&quot;ESSArch ingest&quot;</span><span class="p">),</span>
            <span class="p">(</span><span class="s2">&quot;infoclass_0&quot;</span><span class="p">,</span> <span class="s2">&quot;Information Class 0&quot;</span><span class="p">),</span>
            <span class="p">(</span><span class="s2">&quot;infoclass_1&quot;</span><span class="p">,</span> <span class="s2">&quot;Information Class 1&quot;</span><span class="p">),</span>
            <span class="p">(</span><span class="s2">&quot;infoclass_2&quot;</span><span class="p">,</span> <span class="s2">&quot;Information Class 2&quot;</span><span class="p">),</span>
            <span class="p">(</span><span class="s2">&quot;infoclass_3&quot;</span><span class="p">,</span> <span class="s2">&quot;Information Class 3&quot;</span><span class="p">),</span>
            <span class="p">(</span><span class="s2">&quot;infoclass_4&quot;</span><span class="p">,</span> <span class="s2">&quot;Information Class 4&quot;</span><span class="p">),</span>
        <span class="p">)</span>

<span class="c1">###########################################################################</span>
<span class="c1">#</span>
<span class="c1"># Custom widgets</span>
<span class="c1">#</span>
<span class="k">class</span> <span class="nc">PlainText</span><span class="p">(</span><span class="n">forms</span><span class="o">.</span><span class="n">TextInput</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">render</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">attrs</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">value</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
        <span class="n">final_attrs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_attrs</span><span class="p">(</span><span class="n">attrs</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">value</span><span class="o">==</span><span class="s1">&#39;&#39;</span> <span class="ow">and</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;choices&#39;</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">value</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="n">value_label</span> <span class="o">=</span> <span class="n">value</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">value_label</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">choices</span><span class="p">)[</span><span class="n">value</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">value_label</span> <span class="o">=</span> <span class="n">value</span>
        <span class="k">return</span> <span class="n">mark_safe</span><span class="p">(</span><span class="s1">u&#39;&lt;input type=&quot;hidden&quot; name=&quot;</span><span class="si">%s</span><span class="s1">&quot; </span><span class="si">%s</span><span class="s1"> value=&quot;</span><span class="si">%s</span><span class="s1">&quot; /&gt;</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">name</span><span class="p">,</span><span class="n">flatatt</span><span class="p">(</span><span class="n">final_attrs</span><span class="p">),</span><span class="n">value</span><span class="p">,</span><span class="n">value_label</span><span class="p">))</span>

<span class="k">class</span> <span class="nc">MultiSelectWidget</span><span class="p">(</span><span class="n">forms</span><span class="o">.</span><span class="n">SelectMultiple</span><span class="p">):</span>
    <span class="c1">#css_class = &#39;multiselect&#39;</span>
    <span class="k">class</span> <span class="nc">Media</span><span class="p">:</span>
        <span class="n">css</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;all&#39;</span><span class="p">:</span> <span class="p">(</span>
                <span class="c1">#settings.STATIC_URL + &#39;js/jquery.uix.multiselect/css/common.css&#39;,</span>
                <span class="c1">#settings.STATIC_URL + &#39;jquery-ui-1.10.3/themes/base/jquery-ui.css&#39;,</span>
                <span class="n">settings</span><span class="o">.</span><span class="n">STATIC_URL</span> <span class="o">+</span> <span class="s1">&#39;jquery.uix.multiselect/css/jquery.uix.multiselect.css&#39;</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="p">}</span>
        <span class="n">js</span> <span class="o">=</span> <span class="p">(</span>
            <span class="c1">#settings.STATIC_URL + &#39;jquery-1.10.2.min.js&#39;,</span>
            <span class="c1">#settings.STATIC_URL + &#39;jquery-ui-1.10.3/ui/minified/jquery-ui.min.js&#39;,</span>
            <span class="n">settings</span><span class="o">.</span><span class="n">STATIC_URL</span> <span class="o">+</span> <span class="s1">&#39;jquery.uix.multiselect/js/jquery.uix.multiselect.js&#39;</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="c1">#def add_css_class(self, attrs):</span>
    <span class="c1">#    attrs = attrs or {}</span>
    <span class="c1">#    if &#39;class&#39; in attrs:</span>
    <span class="c1">#        attrs[&#39;class&#39;] += &quot; %s&quot; % self.css_class</span>
    <span class="c1">#    else:</span>
    <span class="c1">#        attrs[&#39;class&#39;] = self.css_class</span>
    <span class="c1">#    return attrs</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">language</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">attrs</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">language</span> <span class="o">=</span> <span class="n">language</span> <span class="ow">or</span> <span class="n">settings</span><span class="o">.</span><span class="n">LANGUAGE_CODE</span><span class="p">[:</span><span class="mi">2</span><span class="p">]</span>
        <span class="c1">#attrs = self.add_css_class(attrs)</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">MultiSelectWidget</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="n">attrs</span><span class="o">=</span><span class="n">attrs</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">render</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">attrs</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="n">rendered</span> <span class="o">=</span> <span class="nb">super</span><span class="p">(</span><span class="n">MultiSelectWidget</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">attrs</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">rendered</span> <span class="o">+</span> <span class="n">mark_safe</span><span class="p">(</span><span class="s1">u&#39;&#39;&#39;&lt;script type=&quot;text/javascript&quot;&gt;</span>
<span class="s1">           $(document).ready(function afterReady() {</span>
<span class="s1">                var elem = $(&#39;#id_</span><span class="si">%(name)s</span><span class="s1">&#39;);</span>
<span class="s1">                elem.multiselect();</span>
<span class="s1">            });</span>
<span class="s1">            &lt;/script&gt;&#39;&#39;&#39;</span> <span class="o">%</span> <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span><span class="n">name</span><span class="p">})</span>

<span class="c1">###########################################################################</span>
<span class="c1">#</span>
<span class="c1"># Choices for models and forms</span>
<span class="c1">#</span>
<span class="n">StatusActivity_CHOICES</span> <span class="o">=</span> <span class="p">(</span>
    <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;OK&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;New object&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;Receive&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="s1">&#39;Checking&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="s1">&#39;Need of assistance&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="s1">&#39;Progress&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="s1">&#39;Pending writes&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="mi">7</span><span class="p">,</span> <span class="s1">&#39;ControlArea&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="s1">&#39;WorkArea&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="s1">&#39;FAIL&#39;</span><span class="p">),</span>
<span class="p">)</span>

<span class="n">StatusProcess_CHOICES</span> <span class="o">=</span> <span class="p">(</span>
    <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;Receive new object&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="s1">&#39;The object is ready to remodel&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="mi">9</span><span class="p">,</span> <span class="s1">&#39;New object stable&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="s2">&quot;Object don&#39;t exist in AIS&quot;</span><span class="p">),</span>
    <span class="p">(</span><span class="mi">11</span><span class="p">,</span> <span class="s2">&quot;Object don&#39;t have any projectcode in AIS&quot;</span><span class="p">),</span>
    <span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="s2">&quot;Object don&#39;t have any local policy&quot;</span><span class="p">),</span>
    <span class="p">(</span><span class="mi">13</span><span class="p">,</span> <span class="s2">&quot;Object already have an AIP!&quot;</span><span class="p">),</span>
    <span class="p">(</span><span class="mi">14</span><span class="p">,</span> <span class="s2">&quot;Object is not active!&quot;</span><span class="p">),</span>
    <span class="p">(</span><span class="mi">19</span><span class="p">,</span> <span class="s1">&#39;Object got a policy&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="s2">&quot;Object not updated from AIS&quot;</span><span class="p">),</span>
    <span class="p">(</span><span class="mi">21</span><span class="p">,</span> <span class="s1">&#39;Object not accepted in AIS&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="mi">24</span><span class="p">,</span> <span class="s1">&#39;Object accepted in AIS&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="mi">25</span><span class="p">,</span> <span class="s1">&#39;SIP validate&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="mi">26</span><span class="p">,</span> <span class="s1">&#39;SIP validate failed&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="mi">29</span><span class="p">,</span> <span class="s1">&#39;SIP validate OK&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="mi">30</span><span class="p">,</span> <span class="s1">&#39;Create AIP package&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="mi">31</span><span class="p">,</span> <span class="s1">&#39;AIP create failed&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="mi">39</span><span class="p">,</span> <span class="s1">&#39;AIP created OK&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="mi">40</span><span class="p">,</span> <span class="s1">&#39;Create package checksum&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="mi">49</span><span class="p">,</span> <span class="s1">&#39;AIP checksum created OK&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="mi">50</span><span class="p">,</span> <span class="s1">&#39;AIP validate&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="mi">51</span><span class="p">,</span> <span class="s1">&#39;AIP validate failed&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="mi">59</span><span class="p">,</span> <span class="s1">&#39;AIP validate OK&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="mi">60</span><span class="p">,</span> <span class="s1">&#39;Try to remove IngestObject&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="mi">61</span><span class="p">,</span> <span class="s1">&#39;Failed to remove IngestObject&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="mi">69</span><span class="p">,</span> <span class="s1">&#39;Remove OK of IngestObject&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="mi">1000</span><span class="p">,</span> <span class="s1">&#39;Write AIP to longterm storage&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="mi">1001</span><span class="p">,</span> <span class="s1">&#39;Fail to write AIP&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="mi">1002</span><span class="p">,</span> <span class="s1">&#39;No empty media available&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="mi">1003</span><span class="p">,</span> <span class="s1">&#39;Problem to mount media&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="mi">1004</span><span class="p">,</span> <span class="s1">&#39;Failed to verify tape after full write&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="mi">1500</span><span class="p">,</span> <span class="s1">&#39;Remote AIP&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="mi">1999</span><span class="p">,</span> <span class="s1">&#39;Write AIP OK&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="mi">2000</span><span class="p">,</span> <span class="s1">&#39;Try to remove temp AIP object&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="mi">2001</span><span class="p">,</span> <span class="s1">&#39;Failed to remove temp AIP object&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="mi">2009</span><span class="p">,</span> <span class="s1">&#39;Remove temp AIP object OK&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="mi">3000</span><span class="p">,</span> <span class="s1">&#39;Archived&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="mi">5000</span><span class="p">,</span> <span class="s1">&#39;ControlArea&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="mi">5100</span><span class="p">,</span> <span class="s1">&#39;WorkArea&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="mi">9999</span><span class="p">,</span> <span class="s1">&#39;Deleted&#39;</span><span class="p">),</span>
<span class="p">)</span>

<span class="n">PackageType_CHOICES</span> <span class="o">=</span> <span class="p">(</span>
    <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;SIP&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;AIC&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;AIP&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="s1">&#39;AIU&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="s1">&#39;DIP&#39;</span><span class="p">),</span>
<span class="p">)</span>

<span class="n">ReqStatus_CHOICES</span> <span class="o">=</span> <span class="p">(</span>
    <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;Pending&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;Initiate&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="s1">&#39;Progress&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="s1">&#39;Success&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="s1">&#39;FAIL&#39;</span><span class="p">),</span>
<span class="p">)</span>

<span class="n">ControlAreaReqType_CHOICES</span> <span class="o">=</span> <span class="p">(</span>
    <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;CheckIn from Reception&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;CheckOut to Workarea&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="s1">&#39;CheckIn from Workarea&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="s1">&#39;DiffCheck&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="s1">&#39;Preserve Information Package&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="s1">&#39;CheckOut to Gatearea from WorkArea&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="mi">7</span><span class="p">,</span> <span class="s1">&#39;CheckIn from Gatearea to WorkArea&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="s1">&#39;Delete IP in control/work area&#39;</span><span class="p">),</span>
<span class="p">)</span>

<span class="n">AccessReqType_CHOICES</span> <span class="o">=</span> <span class="p">(</span>
    <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="s1">&#39;Generate DIP (package)&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="s1">&#39;Generate DIP (package extracted)&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;Generate DIP (package &amp; package extracted)&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;Verify StorageMedium&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="s1">&#39;Get AIP to ControlArea&#39;</span><span class="p">),</span>
<span class="p">)</span>

<span class="n">IngestReqType_CHOICES</span> <span class="o">=</span> <span class="p">(</span>
    <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;Ingest request&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;Ingest request without AIS&#39;</span><span class="p">),</span>
<span class="p">)</span>

<span class="n">MigrationReqType_CHOICES</span> <span class="o">=</span> <span class="p">(</span>
    <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;Copy IP to new storage&#39;</span><span class="p">),</span>
<span class="p">)</span>

<span class="n">RobotReqType_CHOICES</span> <span class="o">=</span> <span class="p">(</span>
    <span class="p">(</span><span class="mi">50</span><span class="p">,</span> <span class="s1">&#39;Mount tape&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="mi">51</span><span class="p">,</span> <span class="s1">&#39;Unmount tape&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="mi">52</span><span class="p">,</span> <span class="s1">&#39;Unmount tape (force)&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;Robot inventory&#39;</span><span class="p">),</span>
<span class="p">)</span>

<span class="n">eventOutcome_CHOICES</span> <span class="o">=</span> <span class="p">(</span>
    <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;OK&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;Failed&#39;</span><span class="p">),</span>
<span class="p">)</span>

<span class="k">class</span> <span class="nc">ObjectMetadata</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">UUIDField</span><span class="p">(</span><span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="n">uuid</span><span class="o">.</span><span class="n">uuid4</span><span class="p">,</span> <span class="n">editable</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">label</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">255</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">startdate</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateTimeField</span><span class="p">(</span><span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">enddate</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateTimeField</span><span class="p">(</span><span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1">###########################################################################</span>
<span class="c1">#</span>
<span class="c1"># General models and forms</span>
<span class="c1">#</span>
<span class="k">class</span> <span class="nc">ArchiveObject</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="c1">#id = models.AutoField(big=True,primary_key=True)</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">BigAutoField</span><span class="p">(</span><span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">ObjectUUID</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">36</span><span class="p">,</span> <span class="n">unique</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="c1">#PolicyId = models.IntegerField(null=True)</span>
    <span class="c1">#PolicyId = models.ForeignKey(ESSArchPolicy, db_column=&#39;PolicyId&#39;, to_field=&#39;PolicyID&#39;, default=0)</span>
    <span class="n">PolicyId</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="s1">&#39;configuration.ArchivePolicy&#39;</span><span class="p">,</span> <span class="n">db_column</span><span class="o">=</span><span class="s1">&#39;PolicyId&#39;</span><span class="p">,</span> <span class="n">to_field</span><span class="o">=</span><span class="s1">&#39;PolicyID&#39;</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">ObjectIdentifierValue</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">255</span><span class="p">,</span> <span class="n">unique</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">ObjectPackageName</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">255</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">ObjectSize</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">BigIntegerField</span><span class="p">(</span><span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">ObjectNumItems</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">IntegerField</span><span class="p">(</span><span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">ObjectMessageDigestAlgorithm</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">IntegerField</span><span class="p">(</span><span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">ObjectMessageDigest</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">128</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">ObjectPath</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">255</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">ObjectActive</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">IntegerField</span><span class="p">(</span><span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">MetaObjectIdentifier</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">255</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">MetaObjectSize</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">BigIntegerField</span><span class="p">(</span><span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">CMetaMessageDigestAlgorithm</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">IntegerField</span><span class="p">(</span><span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">CMetaMessageDigest</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">128</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">PMetaMessageDigestAlgorithm</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">IntegerField</span><span class="p">(</span><span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">PMetaMessageDigest</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">128</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">DataObjectSize</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">BigIntegerField</span><span class="p">(</span><span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">DataObjectNumItems</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">IntegerField</span><span class="p">(</span><span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">Status</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">IntegerField</span><span class="p">(</span><span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">StatusActivity</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">IntegerField</span><span class="p">(</span><span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">choices</span><span class="o">=</span><span class="n">StatusActivity_CHOICES</span><span class="p">)</span>
    <span class="n">StatusProcess</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">IntegerField</span><span class="p">(</span><span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">choices</span><span class="o">=</span><span class="n">StatusProcess_CHOICES</span><span class="p">)</span>
    <span class="n">LastEventDate</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateTimeField</span><span class="p">(</span><span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">linkingAgentIdentifierValue</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">255</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">CreateDate</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateTimeField</span><span class="p">(</span><span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">CreateAgentIdentifierValue</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">255</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">EntryDate</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateTimeField</span><span class="p">(</span><span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">EntryAgentIdentifierValue</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">255</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">OAISPackageType</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">IntegerField</span><span class="p">(</span><span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">choices</span><span class="o">=</span><span class="n">PackageType_CHOICES</span><span class="p">)</span>
    <span class="n">preservationLevelValue</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">IntegerField</span><span class="p">(</span><span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">DELIVERYTYPE</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">255</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">INFORMATIONCLASS</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">IntegerField</span><span class="p">(</span><span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">Generation</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">IntegerField</span><span class="p">(</span><span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">LocalDBdatetime</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateTimeField</span><span class="p">(</span><span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">ExtDBdatetime</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateTimeField</span><span class="p">(</span><span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">archiveobjects</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ManyToManyField</span><span class="p">(</span><span class="s1">&#39;self&#39;</span><span class="p">,</span> <span class="n">through</span><span class="o">=</span><span class="s1">&#39;ArchiveObjectRel&#39;</span><span class="p">,</span> <span class="n">through_fields</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;AIC_UUID&#39;</span><span class="p">,</span> <span class="s1">&#39;UUID&#39;</span><span class="p">),</span> <span class="n">related_name</span><span class="o">=</span><span class="s1">&#39;aic_set&#39;</span><span class="p">,</span> <span class="n">symmetrical</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">ObjectMetadata</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="s1">&#39;essarch.ObjectMetadata&#39;</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">db_table</span> <span class="o">=</span> <span class="s1">&#39;IngestObject&#39;</span>
    <span class="k">def</span> <span class="nf">__unicode__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">ObjectIdentifierValue</span>
    <span class="k">def</span> <span class="nf">get_absolute_url</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">reverse</span><span class="p">(</span><span class="s1">&#39;ingest_listobj&#39;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">check_db_sync</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">LocalDBdatetime</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">ExtDBdatetime</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">LocalDBdatetime</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">ExtDBdatetime</span><span class="p">)</span><span class="o">.</span><span class="n">total_seconds</span><span class="p">()</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span> <span class="k">return</span> <span class="kc">True</span>
            <span class="k">else</span><span class="p">:</span> <span class="k">return</span> <span class="kc">False</span>
        <span class="k">else</span><span class="p">:</span> <span class="k">return</span> <span class="kc">False</span>
    <span class="k">def</span> <span class="nf">get_ip_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">StatusProcess</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">StatusProcess__lt</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">StatusProcess__in</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">StatusActivity__in</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="n">ip_list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="c1"># Try to get an list of IP objects related to AIC object &quot;IP_Object&quot;</span>
        <span class="n">ip_obj_list</span> <span class="o">=</span> <span class="n">ArchiveObject</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">reluuid_set__AIC_UUID</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">order_by</span><span class="p">(</span><span class="s1">&#39;Generation&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">StatusProcess__in</span> <span class="ow">and</span> <span class="n">StatusActivity__in</span><span class="p">:</span>
            <span class="n">ip_obj_list</span> <span class="o">=</span> <span class="n">ip_obj_list</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Q</span><span class="p">(</span><span class="n">StatusProcess__in</span><span class="o">=</span><span class="n">StatusProcess__in</span><span class="p">)</span> <span class="o">|</span> <span class="n">models</span><span class="o">.</span><span class="n">Q</span><span class="p">(</span><span class="n">StatusActivity__in</span><span class="o">=</span><span class="n">StatusActivity__in</span><span class="p">))</span>
        <span class="k">elif</span> <span class="n">StatusProcess</span> <span class="ow">and</span> <span class="n">StatusActivity__in</span><span class="p">:</span>
            <span class="n">ip_obj_list</span> <span class="o">=</span> <span class="n">ip_obj_list</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Q</span><span class="p">(</span><span class="n">StatusProcess</span><span class="o">=</span><span class="n">StatusProcess</span><span class="p">)</span> <span class="o">|</span> <span class="n">models</span><span class="o">.</span><span class="n">Q</span><span class="p">(</span><span class="n">StatusActivity__in</span><span class="o">=</span><span class="n">StatusActivity__in</span><span class="p">))</span>
        <span class="k">elif</span> <span class="n">StatusProcess</span><span class="p">:</span>
            <span class="n">ip_obj_list</span> <span class="o">=</span> <span class="n">ip_obj_list</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">StatusProcess</span><span class="o">=</span><span class="n">StatusProcess</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">StatusProcess__lt</span><span class="p">:</span>
            <span class="n">ip_obj_list</span> <span class="o">=</span> <span class="n">ip_obj_list</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">StatusProcess__lt</span><span class="o">=</span><span class="n">StatusProcess__lt</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">ip_obj_list</span><span class="p">:</span>
            <span class="n">aic_obj</span> <span class="o">=</span> <span class="bp">self</span>
            <span class="k">for</span> <span class="n">ip_obj</span> <span class="ow">in</span> <span class="n">ip_obj_list</span><span class="p">:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">ip_obj</span><span class="o">.</span><span class="n">OAISPackageType</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                    <span class="n">ip_obj_data_list</span> <span class="o">=</span> <span class="n">ip_obj</span><span class="o">.</span><span class="n">archiveobjectdata_set</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
                    <span class="k">if</span> <span class="n">ip_obj_data_list</span><span class="p">:</span>
                        <span class="n">ip_obj_data</span> <span class="o">=</span> <span class="n">ip_obj_data_list</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">ip_obj_data</span> <span class="o">=</span> <span class="kc">None</span>
                    <span class="n">ip_obj_metadata_list</span> <span class="o">=</span> <span class="n">ip_obj</span><span class="o">.</span><span class="n">archiveobjectmetadata_set</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
                    <span class="k">if</span> <span class="n">ip_obj_metadata_list</span><span class="p">:</span>
                        <span class="n">ip_obj_metadata</span> <span class="o">=</span> <span class="n">ip_obj_metadata_list</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">ip_obj_metadata</span> <span class="o">=</span> <span class="kc">None</span>
                    <span class="n">ip_list</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">aic_obj</span><span class="p">,</span><span class="n">ip_obj</span><span class="p">,</span><span class="kc">None</span><span class="p">,</span><span class="n">ip_obj_data</span><span class="p">,</span><span class="n">ip_obj_metadata</span><span class="p">])</span>
        <span class="c1"># Check if object &quot;IP_Object&quot; has an AIC, if not &quot;IP_Object&quot; can be an IP object without AIC.</span>
        <span class="k">elif</span> <span class="ow">not</span> <span class="n">ArchiveObject</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">relaic_set__UUID</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
            <span class="n">aic_obj</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">OAISPackageType</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">ip_obj</span> <span class="o">=</span> <span class="bp">self</span>
                <span class="n">ip_obj_data_list</span> <span class="o">=</span> <span class="n">ip_obj</span><span class="o">.</span><span class="n">archiveobjectdata_set</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
                <span class="k">if</span> <span class="n">ip_obj_data_list</span><span class="p">:</span>
                    <span class="n">ip_obj_data</span> <span class="o">=</span> <span class="n">ip_obj_data_list</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">ip_obj_data</span> <span class="o">=</span> <span class="kc">None</span>
                <span class="n">ip_obj_metadata_list</span> <span class="o">=</span> <span class="n">ip_obj</span><span class="o">.</span><span class="n">archiveobjectmetadata_set</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
                <span class="k">if</span> <span class="n">ip_obj_metadata_list</span><span class="p">:</span>
                    <span class="n">ip_obj_metadata</span> <span class="o">=</span> <span class="n">ip_obj_metadata_list</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">ip_obj_metadata</span> <span class="o">=</span> <span class="kc">None</span>
                <span class="n">ip_list</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">aic_obj</span><span class="p">,</span><span class="n">ip_obj</span><span class="p">,</span><span class="kc">None</span><span class="p">,</span><span class="n">ip_obj_data</span><span class="p">,</span><span class="n">ip_obj_metadata</span><span class="p">])</span>
                
        <span class="k">return</span> <span class="n">ip_list</span>

<span class="k">class</span> <span class="nc">ArchiveObjectStatusForm</span><span class="p">(</span><span class="n">forms</span><span class="o">.</span><span class="n">ModelForm</span><span class="p">):</span>
    <span class="n">required_css_class</span> <span class="o">=</span> <span class="s1">&#39;required&#39;</span>

    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">model</span><span class="o">=</span><span class="n">ArchiveObject</span>
        <span class="n">exclude</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;ObjectUUID&#39;</span><span class="p">,</span><span class="s1">&#39;PolicyId&#39;</span><span class="p">,</span><span class="s1">&#39;ObjectIdentifierValue&#39;</span><span class="p">,</span><span class="s1">&#39;ObjectPackageName&#39;</span><span class="p">,</span><span class="s1">&#39;ObjectSize&#39;</span><span class="p">,</span><span class="s1">&#39;ObjectNumItems&#39;</span><span class="p">,</span><span class="s1">&#39;ObjectMessageDigestAlgorithm&#39;</span><span class="p">,</span><span class="s1">&#39;ObjectMessageDigest&#39;</span><span class="p">,</span>
                 <span class="s1">&#39;ObjectPath&#39;</span><span class="p">,</span><span class="s1">&#39;ObjectActive&#39;</span><span class="p">,</span><span class="s1">&#39;MetaObjectIdentifier&#39;</span><span class="p">,</span><span class="s1">&#39;MetaObjectSize&#39;</span><span class="p">,</span><span class="s1">&#39;CMetaMessageDigestAlgorithm&#39;</span><span class="p">,</span><span class="s1">&#39;CMetaMessageDigest&#39;</span><span class="p">,</span><span class="s1">&#39;PMetaMessageDigestAlgorithm&#39;</span><span class="p">,</span>
                 <span class="s1">&#39;PMetaMessageDigest&#39;</span><span class="p">,</span><span class="s1">&#39;DataObjectSize&#39;</span><span class="p">,</span><span class="s1">&#39;DataObjectNumItems&#39;</span><span class="p">,</span><span class="s1">&#39;Status&#39;</span><span class="p">,</span><span class="s1">&#39;StatusProcess&#39;</span><span class="p">,</span><span class="s1">&#39;LastEventDate&#39;</span><span class="p">,</span><span class="s1">&#39;linkingAgentIdentifierValue&#39;</span><span class="p">,</span><span class="s1">&#39;CreateDate&#39;</span><span class="p">,</span>
                 <span class="s1">&#39;CreateAgentIdentifierValue&#39;</span><span class="p">,</span><span class="s1">&#39;EntryDate&#39;</span><span class="p">,</span><span class="s1">&#39;EntryAgentIdentifierValue&#39;</span><span class="p">,</span><span class="s1">&#39;OAISPackageType&#39;</span><span class="p">,</span><span class="s1">&#39;preservationLevelValue&#39;</span><span class="p">,</span><span class="s1">&#39;DELIVERYTYPE&#39;</span><span class="p">,</span><span class="s1">&#39;INFORMATIONCLASS&#39;</span><span class="p">,</span>
                 <span class="s1">&#39;Generation&#39;</span><span class="p">,</span><span class="s1">&#39;LocalDBdatetime&#39;</span><span class="p">,</span><span class="s1">&#39;ExtDBdatetime&#39;</span><span class="p">)</span>
        <span class="n">widgets</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;StatusActivity&#39;</span><span class="p">:</span> <span class="n">forms</span><span class="o">.</span><span class="n">Select</span><span class="p">(</span><span class="n">attrs</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;onchange&#39;</span><span class="p">:</span><span class="s1">&#39;submit()&#39;</span><span class="p">}),}</span>    

<span class="k">class</span> <span class="nc">ArchiveObjectData</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="c1">#id = models.AutoField(big=True,primary_key=True)</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">BigAutoField</span><span class="p">(</span><span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">UUID</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="n">ArchiveObject</span><span class="p">,</span> <span class="n">db_column</span><span class="o">=</span><span class="s1">&#39;UUID&#39;</span><span class="p">,</span> <span class="n">to_field</span><span class="o">=</span><span class="s1">&#39;ObjectUUID&#39;</span><span class="p">)</span>
    <span class="n">creator</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">255</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">label</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">255</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">startdate</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateTimeField</span><span class="p">(</span><span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">enddate</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateTimeField</span><span class="p">(</span><span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">db_table</span> <span class="o">=</span> <span class="s1">&#39;Object_data&#39;</span>

<span class="k">class</span> <span class="nc">ArchiveObjectMetadata</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="c1">#id = models.AutoField(big=True,primary_key=True)</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">BigAutoField</span><span class="p">(</span><span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">ObjectUUID</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="n">ArchiveObject</span><span class="p">,</span> <span class="n">db_column</span><span class="o">=</span><span class="s1">&#39;ObjectUUID&#39;</span><span class="p">,</span> <span class="n">to_field</span><span class="o">=</span><span class="s1">&#39;ObjectUUID&#39;</span><span class="p">)</span>
    <span class="n">ObjectIdentifierValue</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">255</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">ObjectMetadataType</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">IntegerField</span><span class="p">(</span><span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">ObjectMetadataServer</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">IntegerField</span><span class="p">(</span><span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">ObjectMetadataURL</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">255</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">ObjectMetadataBLOB</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">TextField</span><span class="p">(</span><span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">linkingAgentIdentifierValue</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">45</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">LocalDBdatetime</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateTimeField</span><span class="p">(</span><span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">ExtDBdatetime</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateTimeField</span><span class="p">(</span><span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">db_table</span> <span class="o">=</span> <span class="s1">&#39;IngestObjectMetadata&#39;</span>
    <span class="k">def</span> <span class="nf">check_db_sync</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">LocalDBdatetime</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">ExtDBdatetime</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">LocalDBdatetime</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">ExtDBdatetime</span><span class="p">)</span><span class="o">.</span><span class="n">total_seconds</span><span class="p">()</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span> <span class="k">return</span> <span class="kc">True</span>
            <span class="k">else</span><span class="p">:</span> <span class="k">return</span> <span class="kc">False</span>
        <span class="k">else</span><span class="p">:</span> <span class="k">return</span> <span class="kc">False</span>

<span class="k">class</span> <span class="nc">ArchiveObjectRel</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="c1">#id = models.AutoField(big=True,primary_key=True)</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">BigAutoField</span><span class="p">(</span><span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">AIC_UUID</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="s1">&#39;ArchiveObject&#39;</span><span class="p">,</span> <span class="n">db_column</span><span class="o">=</span><span class="s1">&#39;AIC_UUID&#39;</span><span class="p">,</span> <span class="n">related_name</span><span class="o">=</span><span class="s1">&#39;relaic_set&#39;</span><span class="p">,</span> <span class="n">to_field</span><span class="o">=</span><span class="s1">&#39;ObjectUUID&#39;</span><span class="p">)</span>
    <span class="n">UUID</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="s1">&#39;ArchiveObject&#39;</span><span class="p">,</span> <span class="n">db_column</span><span class="o">=</span><span class="s1">&#39;UUID&#39;</span><span class="p">,</span> <span class="n">related_name</span><span class="o">=</span><span class="s1">&#39;reluuid_set&#39;</span><span class="p">,</span> <span class="n">to_field</span><span class="o">=</span><span class="s1">&#39;ObjectUUID&#39;</span><span class="p">)</span>
    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">db_table</span> <span class="o">=</span> <span class="s1">&#39;Object_rel&#39;</span>

<span class="k">class</span> <span class="nc">agentIdentifier</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="c1">#id = models.AutoField(big=True,primary_key=True)</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">BigAutoField</span><span class="p">(</span><span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">agentIdentifierValue</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">45</span><span class="p">)</span>
    <span class="n">agentName</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">45</span><span class="p">)</span>
    <span class="n">agentType</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">IntegerField</span><span class="p">(</span><span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">db_table</span> <span class="o">=</span> <span class="s1">&#39;agentIdentifier&#39;</span>

<span class="k">class</span> <span class="nc">eventIdentifier</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="c1">#id = models.AutoField(big=True,primary_key=True)</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">BigAutoField</span><span class="p">(</span><span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">eventIdentifierValue</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">36</span><span class="p">,</span> <span class="n">unique</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">eventType</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">IntegerField</span><span class="p">(</span><span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">eventDateTime</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateTimeField</span><span class="p">(</span><span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">eventDetail</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">255</span><span class="p">)</span>
    <span class="n">eventApplication</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">50</span><span class="p">)</span>
    <span class="n">eventVersion</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">45</span><span class="p">)</span>
    <span class="n">eventOutcome</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">IntegerField</span><span class="p">(</span><span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">eventOutcomeDetailNote</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">1024</span><span class="p">)</span>
    <span class="n">linkingAgentIdentifierValue</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">45</span><span class="p">)</span>
    <span class="n">linkingObjectIdentifierValue</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">255</span><span class="p">)</span>
    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">db_table</span> <span class="o">=</span> <span class="s1">&#39;eventIdentifier&#39;</span>

<span class="k">class</span> <span class="nc">eventType_codes</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="c1">#id = models.AutoField(big=True,primary_key=True)</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">BigAutoField</span><span class="p">(</span><span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">code</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">IntegerField</span><span class="p">(</span><span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">desc_sv</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
    <span class="n">desc_en</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
    <span class="n">localDB</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">IntegerField</span><span class="p">(</span><span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">externalDB</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">IntegerField</span><span class="p">(</span><span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">db_table</span> <span class="o">=</span> <span class="s1">&#39;eventType_codes&#39;</span>

<span class="k">class</span> <span class="nc">ProcessStep</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">UUIDField</span><span class="p">(</span><span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="n">uuid</span><span class="o">.</span><span class="n">uuid4</span><span class="p">,</span> <span class="n">editable</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">256</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="nb">type</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">IntegerField</span><span class="p">(</span><span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">choices</span><span class="o">=</span><span class="n">StatusProcess_CHOICES</span><span class="p">)</span>
    <span class="n">user</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">45</span><span class="p">)</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">PickledObjectField</span><span class="p">(</span><span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">status</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">IntegerField</span><span class="p">(</span><span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">choices</span><span class="o">=</span><span class="n">ReqStatus_CHOICES</span><span class="p">)</span>
    <span class="n">posted</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateTimeField</span><span class="p">(</span><span class="n">auto_now_add</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">progress</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">IntegerField</span><span class="p">(</span><span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">archiveobject</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="s1">&#39;ArchiveObject&#39;</span><span class="p">,</span> <span class="n">to_field</span><span class="o">=</span><span class="s1">&#39;ObjectUUID&#39;</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">hidden</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">BooleanField</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">db_table</span> <span class="o">=</span> <span class="s1">u&#39;ProcessStep&#39;</span>
    <span class="k">def</span> <span class="nf">__unicode__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1"> - </span><span class="si">%s</span><span class="s1"> - archiveobject:</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">archiveobject</span><span class="o">.</span><span class="n">ObjectUUID</span><span class="p">)</span>

<span class="kn">from</span> <span class="nn">celery</span> <span class="k">import</span> <span class="n">states</span> <span class="k">as</span> <span class="n">celery_states</span>
<span class="n">TASK_STATE_CHOICES</span> <span class="o">=</span> <span class="nb">zip</span><span class="p">(</span><span class="n">celery_states</span><span class="o">.</span><span class="n">ALL_STATES</span><span class="p">,</span> <span class="n">celery_states</span><span class="o">.</span><span class="n">ALL_STATES</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">ProcessTask</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Task result/status.&quot;&quot;&quot;</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">UUIDField</span><span class="p">(</span><span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="n">uuid</span><span class="o">.</span><span class="n">uuid4</span><span class="p">,</span> <span class="n">editable</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">256</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">task_id</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">_</span><span class="p">(</span><span class="s1">&#39;task id&#39;</span><span class="p">),</span> <span class="n">max_length</span><span class="o">=</span><span class="mi">255</span><span class="p">,</span> <span class="n">unique</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">status</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">_</span><span class="p">(</span><span class="s1">&#39;state&#39;</span><span class="p">),</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="n">celery_states</span><span class="o">.</span><span class="n">PENDING</span><span class="p">,</span> <span class="n">choices</span><span class="o">=</span><span class="n">TASK_STATE_CHOICES</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">PickledObjectField</span><span class="p">(</span><span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">editable</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">date_done</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateTimeField</span><span class="p">(</span><span class="n">_</span><span class="p">(</span><span class="s1">&#39;done at&#39;</span><span class="p">),</span> <span class="n">auto_now</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">traceback</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">TextField</span><span class="p">(</span><span class="n">_</span><span class="p">(</span><span class="s1">&#39;traceback&#39;</span><span class="p">),</span> <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">hidden</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">BooleanField</span><span class="p">(</span><span class="n">editable</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">db_index</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">meta</span> <span class="o">=</span> <span class="n">PickledObjectField</span><span class="p">(</span><span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">editable</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">progress</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">IntegerField</span><span class="p">(</span><span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">processstep</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="s1">&#39;ProcessStep&#39;</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">db_table</span> <span class="o">=</span> <span class="s1">&#39;ProcessTask&#39;</span>
    <span class="k">def</span> <span class="nf">__unicode__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1"> - </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">IOqueue</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="c1">#id = models.AutoField(big=True,primary_key=True)</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">BigAutoField</span><span class="p">(</span><span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">cmd</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">IntegerField</span><span class="p">(</span><span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">cmdprio</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">IntegerField</span><span class="p">(</span><span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">work_uuid</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">36</span><span class="p">)</span>
    <span class="n">ObjectIdentifierValue</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">255</span><span class="p">)</span>
    <span class="n">ObjectMessageDigest</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">128</span><span class="p">)</span>
    <span class="n">ObjectPath</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">255</span><span class="p">)</span>
    <span class="n">storageMedium</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">IntegerField</span><span class="p">(</span><span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">storageMediumID</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">45</span><span class="p">)</span>
    <span class="n">sm_list</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">255</span><span class="p">)</span>
    <span class="n">storageMediumBlockSize</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">IntegerField</span><span class="p">(</span><span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">storageMediumFormat</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">IntegerField</span><span class="p">(</span><span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">contentLocationValue</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">IntegerField</span><span class="p">(</span><span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">storageMediumLocation</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">45</span><span class="p">)</span>
    <span class="n">t_prefix</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">6</span><span class="p">)</span>
    <span class="n">WriteSize</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">BigIntegerField</span><span class="p">(</span><span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">date_created</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateTimeField</span><span class="p">(</span><span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">Status</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">IntegerField</span><span class="p">(</span><span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">db_table</span> <span class="o">=</span> <span class="s1">&#39;IOqueue&#39;</span>

<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">class ESSReg001(models.Model):</span>
<span class="sd">    #id = models.AutoField(big=True,primary_key=True)</span>
<span class="sd">    id = BigAutoField(primary_key=True)</span>
<span class="sd">    ObjectUUID = models.ForeignKey(ArchiveObject, db_column=&#39;ObjectUUID&#39;, to_field=&#39;ObjectUUID&#39;)</span>
<span class="sd">    i000 = models.IntegerField(null=True)</span>
<span class="sd">    i001 = models.IntegerField(null=True)</span>
<span class="sd">    i002 = models.IntegerField(null=True)</span>
<span class="sd">    i003 = models.IntegerField(null=True)</span>
<span class="sd">    i004 = models.IntegerField(null=True)</span>
<span class="sd">    i005 = models.IntegerField(null=True)</span>
<span class="sd">    i006 = models.IntegerField(null=True)</span>
<span class="sd">    i007 = models.IntegerField(null=True)</span>
<span class="sd">    i008 = models.IntegerField(null=True)</span>
<span class="sd">    i009 = models.IntegerField(null=True)</span>
<span class="sd">    i010 = models.IntegerField(null=True)</span>
<span class="sd">    i011 = models.IntegerField(null=True)</span>
<span class="sd">    i012 = models.IntegerField(null=True)</span>
<span class="sd">    i013 = models.IntegerField(null=True)</span>
<span class="sd">    i014 = models.IntegerField(null=True)</span>
<span class="sd">    i015 = models.IntegerField(null=True)</span>
<span class="sd">    i016 = models.IntegerField(null=True)</span>
<span class="sd">    i017 = models.IntegerField(null=True)</span>
<span class="sd">    i018 = models.IntegerField(null=True)</span>
<span class="sd">    i019 = models.IntegerField(null=True)</span>
<span class="sd">    s000 = models.CharField(max_length=255)</span>
<span class="sd">    s001 = models.CharField(max_length=255)</span>
<span class="sd">    s002 = models.CharField(max_length=255)</span>
<span class="sd">    s003 = models.CharField(max_length=255)</span>
<span class="sd">    s004 = models.CharField(max_length=255)</span>
<span class="sd">    s005 = models.CharField(max_length=255)</span>
<span class="sd">    s006 = models.CharField(max_length=255)</span>
<span class="sd">    s007 = models.CharField(max_length=255)</span>
<span class="sd">    s008 = models.CharField(max_length=255)</span>
<span class="sd">    s009 = models.CharField(max_length=255)</span>
<span class="sd">    s010 = models.CharField(max_length=255)</span>
<span class="sd">    s011 = models.CharField(max_length=255)</span>
<span class="sd">    s012 = models.CharField(max_length=255)</span>
<span class="sd">    s013 = models.CharField(max_length=255)</span>
<span class="sd">    s014 = models.CharField(max_length=255)</span>
<span class="sd">    s015 = models.CharField(max_length=255)</span>
<span class="sd">    s016 = models.CharField(max_length=255)</span>
<span class="sd">    s017 = models.CharField(max_length=255)</span>
<span class="sd">    s018 = models.CharField(max_length=255)</span>
<span class="sd">    s019 = models.CharField(max_length=255)</span>
<span class="sd">    class Meta:</span>
<span class="sd">        db_table = &#39;ESSReg001&#39;</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="c1">###########################################################################</span>
<span class="c1">#</span>
<span class="c1"># Controlarea models and forms</span>
<span class="c1">#</span>
<span class="k">class</span> <span class="nc">ControlAreaQueue</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>     
    <span class="n">ReqUUID</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">36</span><span class="p">)</span>
    <span class="n">ReqType</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">IntegerField</span><span class="p">(</span><span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">choices</span><span class="o">=</span><span class="n">ControlAreaReqType_CHOICES</span><span class="p">)</span>
    <span class="n">ReqPurpose</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">255</span><span class="p">)</span>
    <span class="n">user</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">45</span><span class="p">)</span>
    <span class="n">password</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">45</span><span class="p">,</span><span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">ObjectIdentifierValue</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">255</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">Status</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">IntegerField</span><span class="p">(</span><span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">choices</span><span class="o">=</span><span class="n">ReqStatus_CHOICES</span><span class="p">)</span>
    <span class="n">posted</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateTimeField</span><span class="p">(</span><span class="n">auto_now_add</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">taskid</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">255</span><span class="p">,</span><span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">db_table</span> <span class="o">=</span> <span class="s1">&#39;ReqControlAreaQueue&#39;</span>
    
<span class="k">class</span> <span class="nc">ControlAreaForm</span><span class="p">(</span><span class="n">forms</span><span class="o">.</span><span class="n">ModelForm</span><span class="p">):</span>
    <span class="n">required_css_class</span> <span class="o">=</span> <span class="s1">&#39;required&#39;</span>
    <span class="n">ReqUUID</span> <span class="o">=</span> <span class="n">forms</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s1">&#39;ReqUUID&#39;</span><span class="p">,</span> <span class="n">widget</span> <span class="o">=</span> <span class="n">PlainText</span><span class="p">())</span>
    <span class="n">ObjectIdentifierValue</span> <span class="o">=</span> <span class="n">forms</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s1">&#39;ObjectIdentifierValue&#39;</span><span class="p">,</span> <span class="n">widget</span><span class="o">=</span><span class="n">PlainText</span><span class="p">())</span>
    <span class="n">Status</span> <span class="o">=</span> <span class="n">forms</span><span class="o">.</span><span class="n">IntegerField</span><span class="p">(</span><span class="n">widget</span> <span class="o">=</span> <span class="n">forms</span><span class="o">.</span><span class="n">HiddenInput</span><span class="p">())</span>
    <span class="n">user</span> <span class="o">=</span> <span class="n">forms</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s1">&#39;User&#39;</span><span class="p">,</span> <span class="n">widget</span> <span class="o">=</span> <span class="n">PlainText</span><span class="p">())</span>
    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">model</span><span class="o">=</span><span class="n">ControlAreaQueue</span>   
        <span class="n">exclude</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;password&#39;</span><span class="p">,</span> <span class="s1">&#39;taskid&#39;</span><span class="p">,)</span>

<span class="k">class</span> <span class="nc">ControlAreaForm2</span><span class="p">(</span><span class="n">ControlAreaForm</span><span class="p">):</span>
    <span class="n">ReqType</span> <span class="o">=</span> <span class="n">forms</span><span class="o">.</span><span class="n">ChoiceField</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s1">&#39;ReqType&#39;</span><span class="p">,</span><span class="n">choices</span><span class="o">=</span><span class="n">ControlAreaReqType_CHOICES</span><span class="p">,</span> <span class="n">widget</span> <span class="o">=</span> <span class="n">PlainText</span><span class="p">())</span>

<span class="k">class</span> <span class="nc">ControlAreaForm_CheckoutToWork</span><span class="p">(</span><span class="n">ControlAreaForm2</span><span class="p">):</span>
    <span class="n">read_only_access</span> <span class="o">=</span> <span class="n">forms</span><span class="o">.</span><span class="n">BooleanField</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s1">&#39;Read only access&#39;</span><span class="p">,</span><span class="n">help_text</span><span class="o">=</span><span class="s1">&#39;Do not create a new IP generation&#39;</span><span class="p">,</span><span class="n">required</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">ControlAreaForm_CheckInFromWork</span><span class="p">(</span><span class="n">ControlAreaForm2</span><span class="p">):</span>
    <span class="n">allow_unknown_filetypes</span> <span class="o">=</span> <span class="n">forms</span><span class="o">.</span><span class="n">BooleanField</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s1">&#39;Allow unknown filetypes&#39;</span><span class="p">,</span><span class="n">required</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">ControlAreaForm_file</span><span class="p">(</span><span class="n">ControlAreaForm2</span><span class="p">):</span>
    <span class="n">ObjectIdentifierValue</span> <span class="o">=</span> <span class="n">forms</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s1">&#39;ObjectIdentifierValue&#39;</span><span class="p">,</span><span class="n">required</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">widget</span> <span class="o">=</span> <span class="n">forms</span><span class="o">.</span><span class="n">HiddenInput</span><span class="p">())</span>
    <span class="n">FileSelect_CHOICES</span> <span class="o">=</span> <span class="p">()</span> 
    <span class="n">filename</span> <span class="o">=</span> <span class="n">forms</span><span class="o">.</span><span class="n">MultipleChoiceField</span><span class="p">(</span><span class="n">choices</span><span class="o">=</span><span class="n">FileSelect_CHOICES</span><span class="p">,</span> <span class="n">widget</span><span class="o">=</span><span class="n">forms</span><span class="o">.</span><span class="n">CheckboxSelectMultiple</span><span class="p">())</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>    
        <span class="nb">super</span><span class="p">(</span><span class="n">ControlAreaForm_file</span><span class="p">,</span> <span class="bp">self</span> <span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">FileSelect_CHOICES</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">[</span><span class="s1">&#39;filename&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">choices</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">FileSelect_CHOICES</span>

<span class="k">class</span> <span class="nc">ControlAreaForm_file2</span><span class="p">(</span><span class="n">ControlAreaForm2</span><span class="p">):</span>
    <span class="n">ObjectIdentifierValue</span> <span class="o">=</span> <span class="n">forms</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s1">&#39;ObjectIdentifierValue&#39;</span><span class="p">,</span><span class="n">required</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">widget</span> <span class="o">=</span> <span class="n">forms</span><span class="o">.</span><span class="n">HiddenInput</span><span class="p">())</span>
    <span class="n">FileSelect_CHOICES</span> <span class="o">=</span> <span class="p">()</span> 
    <span class="n">filename</span> <span class="o">=</span> <span class="n">forms</span><span class="o">.</span><span class="n">MultipleChoiceField</span><span class="p">(</span><span class="n">choices</span><span class="o">=</span><span class="n">FileSelect_CHOICES</span><span class="p">,</span> <span class="n">widget</span><span class="o">=</span><span class="n">MultiSelectWidget</span><span class="p">())</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>    
        <span class="nb">super</span><span class="p">(</span><span class="n">ControlAreaForm_file2</span><span class="p">,</span> <span class="bp">self</span> <span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">FileSelect_CHOICES</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">[</span><span class="s1">&#39;filename&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">choices</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">FileSelect_CHOICES</span>

<span class="k">class</span> <span class="nc">ControlAreaForm_reception</span><span class="p">(</span><span class="n">ControlAreaForm2</span><span class="p">):</span>
    <span class="n">POLICYID</span> <span class="o">=</span> <span class="n">forms</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s1">&#39;Archive Policy ID&#39;</span><span class="p">,</span> <span class="n">widget</span> <span class="o">=</span> <span class="n">PlainText</span><span class="p">())</span>
    <span class="n">INFORMATIONCLASS</span> <span class="o">=</span> <span class="n">forms</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s1">&#39;Information Class&#39;</span><span class="p">,</span> <span class="n">widget</span> <span class="o">=</span> <span class="n">PlainText</span><span class="p">())</span>
    <span class="n">DELIVERYTYPE</span> <span class="o">=</span> <span class="n">forms</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s1">&#39;DELIVERYTYPE&#39;</span><span class="p">,</span> <span class="n">widget</span> <span class="o">=</span> <span class="n">PlainText</span><span class="p">())</span>
    <span class="n">DELIVERYSPECIFICATION</span> <span class="o">=</span> <span class="n">forms</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s1">&#39;DELIVERYSPECIFICATION&#39;</span><span class="p">,</span> <span class="n">widget</span> <span class="o">=</span> <span class="n">PlainText</span><span class="p">())</span>
    <span class="n">allow_unknown_filetypes</span> <span class="o">=</span> <span class="n">forms</span><span class="o">.</span><span class="n">BooleanField</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s1">&#39;Allow unknown filetypes&#39;</span><span class="p">,</span><span class="n">required</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    
<span class="c1">###########################################################################</span>
<span class="c1">#</span>
<span class="c1"># Access models and forms</span>
<span class="c1">#</span>
<span class="k">class</span> <span class="nc">AccessQueue</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">UUIDField</span><span class="p">(</span><span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="n">uuid</span><span class="o">.</span><span class="n">uuid4</span><span class="p">,</span> <span class="n">editable</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">ReqUUID</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">36</span><span class="p">)</span>
    <span class="n">ReqType</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">IntegerField</span><span class="p">(</span><span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">choices</span><span class="o">=</span><span class="n">AccessReqType_CHOICES</span><span class="p">)</span>
    <span class="n">ReqPurpose</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">255</span><span class="p">)</span>
    <span class="n">user</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">45</span><span class="p">)</span>
    <span class="n">password</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">45</span><span class="p">,</span><span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">ObjectIdentifierValue</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">255</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">storageMediumID</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">45</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">Status</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">IntegerField</span><span class="p">(</span><span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">choices</span><span class="o">=</span><span class="n">ReqStatus_CHOICES</span><span class="p">)</span>
    <span class="n">Path</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">255</span><span class="p">)</span>
    <span class="n">posted</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateTimeField</span><span class="p">(</span><span class="n">auto_now_add</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">db_table</span> <span class="o">=</span> <span class="s1">&#39;AccessQueue&#39;</span>
        <span class="n">permissions</span> <span class="o">=</span> <span class="p">(</span>                    
            <span class="p">(</span><span class="s2">&quot;list_accessqueue&quot;</span><span class="p">,</span> <span class="s2">&quot;Can list access queue&quot;</span><span class="p">),</span>
        <span class="p">)</span>
    <span class="k">def</span> <span class="nf">get_absolute_url</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">reverse</span><span class="p">(</span><span class="s1">&#39;access_list&#39;</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">AccessQueueForm</span><span class="p">(</span><span class="n">forms</span><span class="o">.</span><span class="n">ModelForm</span><span class="p">):</span>
    <span class="n">required_css_class</span> <span class="o">=</span> <span class="s1">&#39;required&#39;</span>
    <span class="c1">#ReqUUID = forms.CharField(label=&#39;ReqUUID&#39;, widget = forms.TextInput(attrs={&#39;readonly&#39;:&#39;readonly&#39;}))</span>
    <span class="n">ReqUUID</span> <span class="o">=</span> <span class="n">forms</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s1">&#39;ReqUUID&#39;</span><span class="p">,</span> <span class="n">widget</span> <span class="o">=</span> <span class="n">PlainText</span><span class="p">())</span>
    <span class="c1">#ReqType = forms.ChoiceField(label=&#39;ReqType&#39;, choices=ReqType_CHOICES , widget = forms.CheckboxInput(attrs={&#39;disabled&#39;:&#39;disabled&#39;}))</span>
    <span class="c1">#ReqType = forms.ChoiceField(label=&#39;ReqType&#39;, choices=ReqType_CHOICES , widget = forms.Select(attrs={&#39;disabled&#39;:&#39;disabled&#39;}))</span>
    <span class="c1">#ReqType = forms.ChoiceField(label=&#39;ReqType&#39;, choices=ReqType_CHOICES , widget = PlainText())</span>
    <span class="n">ObjectIdentifierValue</span> <span class="o">=</span> <span class="n">forms</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">widget</span><span class="o">=</span><span class="n">forms</span><span class="o">.</span><span class="n">Textarea</span><span class="p">())</span>
    <span class="n">Status</span> <span class="o">=</span> <span class="n">forms</span><span class="o">.</span><span class="n">IntegerField</span><span class="p">(</span><span class="n">widget</span> <span class="o">=</span> <span class="n">forms</span><span class="o">.</span><span class="n">HiddenInput</span><span class="p">())</span>
    <span class="n">user</span> <span class="o">=</span> <span class="n">forms</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s1">&#39;User&#39;</span><span class="p">,</span> <span class="n">widget</span> <span class="o">=</span> <span class="n">PlainText</span><span class="p">())</span>
<span class="c1">#    def clean_Path(self):</span>
<span class="c1">#        data = self.cleaned_data[&#39;Path&#39;]</span>
<span class="c1">#        print data</span>
<span class="c1">#        if not data == &#39;hej0077&#39;:</span>
<span class="c1">#            raise forms.ValidationError(&quot;Wrong Path2222&quot;)</span>
<span class="c1">#        return data</span>
<span class="c1">#    def clean(self):</span>
<span class="c1">#        cleaned_data = super(AccessQueueForm, self).clean()</span>
<span class="c1">#        Path = cleaned_data.get(&#39;Path&#39;)</span>
<span class="c1">#        if not Path == &#39;hej007&#39;:</span>
<span class="c1">#            msg = u&quot;Wrong path!&quot;</span>
<span class="c1">#            self._errors[&quot;Path&quot;] = self.error_class([msg])</span>
<span class="c1">#        del cleaned_data[&#39;Path&#39;]</span>
<span class="c1">#        print &#39;dir cleaned_data: %s&#39; % dir(cleaned_data)</span>
<span class="c1">#        print &#39;cleaned_data: %s&#39; % cleaned_data</span>
<span class="c1">#        return cleaned_data</span>

    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">model</span><span class="o">=</span><span class="n">AccessQueue</span>   
        <span class="n">exclude</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;password&#39;</span><span class="p">,)</span>    

<span class="k">class</span> <span class="nc">AccessQueueFormUpdate</span><span class="p">(</span><span class="n">AccessQueueForm</span><span class="p">):</span>
    <span class="n">Status</span> <span class="o">=</span> <span class="n">forms</span><span class="o">.</span><span class="n">ChoiceField</span><span class="p">(</span><span class="n">choices</span><span class="o">=</span><span class="n">ReqStatus_CHOICES</span><span class="p">)</span>

<span class="c1">###########################################################################</span>
<span class="c1">#</span>
<span class="c1"># Ingest models and forms</span>
<span class="c1">#</span>
<span class="k">class</span> <span class="nc">IngestQueue</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>     
    <span class="n">ReqUUID</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">36</span><span class="p">)</span>
    <span class="n">ReqType</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">IntegerField</span><span class="p">(</span><span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">choices</span><span class="o">=</span><span class="n">IngestReqType_CHOICES</span><span class="p">)</span>
    <span class="n">ReqPurpose</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">255</span><span class="p">)</span>
    <span class="n">user</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">45</span><span class="p">)</span>
    <span class="n">password</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">45</span><span class="p">,</span><span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">ObjectIdentifierValue</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">255</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">Status</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">IntegerField</span><span class="p">(</span><span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">choices</span><span class="o">=</span><span class="n">ReqStatus_CHOICES</span><span class="p">)</span>
    <span class="n">posted</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateTimeField</span><span class="p">(</span><span class="n">auto_now_add</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">db_table</span> <span class="o">=</span> <span class="s1">&#39;ReqIngestQueue&#39;</span>
        <span class="n">permissions</span> <span class="o">=</span> <span class="p">(</span>
            <span class="p">(</span><span class="s2">&quot;list_ingestqueue&quot;</span><span class="p">,</span> <span class="s2">&quot;Can list ingest queue&quot;</span><span class="p">),</span>
        <span class="p">)</span>
    <span class="k">def</span> <span class="nf">get_absolute_url</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">reverse</span><span class="p">(</span><span class="s1">&#39;ingest_list&#39;</span><span class="p">)</span>
    
<span class="k">class</span> <span class="nc">IngestQueueForm</span><span class="p">(</span><span class="n">forms</span><span class="o">.</span><span class="n">ModelForm</span><span class="p">):</span>
    <span class="n">required_css_class</span> <span class="o">=</span> <span class="s1">&#39;required&#39;</span>
    <span class="n">ReqUUID</span> <span class="o">=</span> <span class="n">forms</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s1">&#39;ReqUUID&#39;</span><span class="p">,</span> <span class="n">widget</span> <span class="o">=</span> <span class="n">PlainText</span><span class="p">())</span>
    <span class="n">ObjectIdentifierValue</span> <span class="o">=</span> <span class="n">forms</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">widget</span><span class="o">=</span><span class="n">forms</span><span class="o">.</span><span class="n">Textarea</span><span class="p">())</span>
    <span class="n">Status</span> <span class="o">=</span> <span class="n">forms</span><span class="o">.</span><span class="n">IntegerField</span><span class="p">(</span><span class="n">widget</span> <span class="o">=</span> <span class="n">forms</span><span class="o">.</span><span class="n">HiddenInput</span><span class="p">())</span>
    <span class="n">user</span> <span class="o">=</span> <span class="n">forms</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s1">&#39;User&#39;</span><span class="p">,</span> <span class="n">widget</span> <span class="o">=</span> <span class="n">PlainText</span><span class="p">())</span>
    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">model</span><span class="o">=</span><span class="n">IngestQueue</span>   
        <span class="n">exclude</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;password&#39;</span><span class="p">,)</span>    

<span class="k">class</span> <span class="nc">IngestQueueFormUpdate</span><span class="p">(</span><span class="n">IngestQueueForm</span><span class="p">):</span>
    <span class="n">Status</span> <span class="o">=</span> <span class="n">forms</span><span class="o">.</span><span class="n">ChoiceField</span><span class="p">(</span><span class="n">choices</span><span class="o">=</span><span class="n">ReqStatus_CHOICES</span><span class="p">)</span>

<span class="c1">###########################################################################</span>
<span class="c1">#</span>
<span class="c1"># Administration models and forms</span>
<span class="c1">#</span>
<span class="c1">#&quot;&quot;&quot;</span>
<span class="kn">from</span> <span class="nn">Storage.models</span> <span class="k">import</span> <span class="n">MediumType_CHOICES</span><span class="p">,</span> <span class="n">MediumFormat_CHOICES</span><span class="p">,</span> <span class="n">MediumLocationStatus_CHOICES</span><span class="p">,</span> <span class="n">MediumStatus_CHOICES</span>

<span class="k">class</span> <span class="nc">storageMedium</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="c1">#id = models.AutoField(big=True,primary_key=True)</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">BigAutoField</span><span class="p">(</span><span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">storageMediumUUID</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">36</span><span class="p">,</span> <span class="n">unique</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">storageMedium</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">IntegerField</span><span class="p">(</span><span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">choices</span><span class="o">=</span><span class="n">MediumType_CHOICES</span><span class="p">)</span>
    <span class="n">storageMediumID</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">45</span><span class="p">,</span> <span class="n">unique</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">storageMediumDate</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateTimeField</span><span class="p">(</span><span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">storageMediumLocation</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">45</span><span class="p">)</span>
    <span class="n">storageMediumLocationStatus</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">IntegerField</span><span class="p">(</span><span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">choices</span><span class="o">=</span><span class="n">MediumLocationStatus_CHOICES</span><span class="p">)</span>
    <span class="n">storageMediumBlockSize</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">IntegerField</span><span class="p">(</span><span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">storageMediumUsedCapacity</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">BigIntegerField</span><span class="p">(</span><span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">storageMediumStatus</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">IntegerField</span><span class="p">(</span><span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">choices</span><span class="o">=</span><span class="n">MediumStatus_CHOICES</span><span class="p">)</span>
    <span class="n">storageMediumFormat</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">IntegerField</span><span class="p">(</span><span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">choices</span><span class="o">=</span><span class="n">MediumFormat_CHOICES</span><span class="p">)</span>
    <span class="n">storageMediumMounts</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">IntegerField</span><span class="p">(</span><span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">linkingAgentIdentifierValue</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">45</span><span class="p">)</span>
    <span class="n">CreateDate</span>  <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateTimeField</span><span class="p">(</span><span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">CreateAgentIdentifierValue</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">45</span><span class="p">)</span>
    <span class="n">LocalDBdatetime</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateTimeField</span><span class="p">(</span><span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">ExtDBdatetime</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateTimeField</span><span class="p">(</span><span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">db_table</span> <span class="o">=</span> <span class="s1">&#39;storageMedium&#39;</span>
        <span class="n">permissions</span> <span class="o">=</span> <span class="p">(</span>
            <span class="p">(</span><span class="s2">&quot;list_storageMedium&quot;</span><span class="p">,</span> <span class="s2">&quot;Can list storageMedium&quot;</span><span class="p">),</span>
        <span class="p">)</span>

<span class="c1">#class storageMediumTable(tables.Table):</span>
<span class="c1">#    storageMediumUUID = tables.CheckBoxColumn()</span>
<span class="c1">#    storageMediumID = tables.LinkColumn(&#39;admin_detailstoragemedium&#39;,args=[A(&#39;pk&#39;)],verbose_name=&quot;ID&quot;)</span>
<span class="c1">#    storageMedium = tables.Column(verbose_name=&quot;Type&quot;)</span>
<span class="c1">#    storageMediumStatus = tables.Column(verbose_name=&quot;Status&quot;)</span>
<span class="c1">#    storageMediumDate =  tables.Column(verbose_name=&quot;LastUpdate&quot;)</span>
<span class="c1">#    storageMediumLocation = tables.Column(verbose_name=&quot;Location&quot;)</span>
<span class="c1">#    storageMediumLocationStatus = tables.Column(verbose_name=&quot;Location Status&quot;)</span>
<span class="c1">#    storageMediumUsedCapacity = tables.Column(verbose_name=&quot;Used Capacity&quot;)</span>
<span class="c1">#    storageMediumMounts = tables.Column(verbose_name=&quot;Used&quot;)</span>
<span class="c1"># </span>
<span class="c1">#    class Meta:</span>
<span class="c1">#        model = storageMedium</span>
<span class="c1">#        attrs = {&quot;class&quot;: &quot;paleblue&quot;}</span>
<span class="c1">#        fields = (&quot;storageMediumUUID&quot;,&quot;storageMediumID&quot;,&quot;storageMedium&quot;,&quot;storageMediumStatus&quot;,&quot;storageMediumDate&quot;,&quot;storageMediumLocation&quot;,&quot;storageMediumLocationStatus&quot;,&quot;storageMediumUsedCapacity&quot;,&quot;storageMediumMounts&quot;)</span>

        
<span class="k">class</span> <span class="nc">storage</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="c1">#id = models.AutoField(big=True,primary_key=True)</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">BigAutoField</span><span class="p">(</span><span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">contentLocation</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">BigIntegerField</span><span class="p">(</span><span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">ObjectUUID</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="n">ArchiveObject</span><span class="p">,</span> <span class="n">db_column</span><span class="o">=</span><span class="s1">&#39;ObjectUUID&#39;</span><span class="p">,</span> <span class="n">to_field</span><span class="o">=</span><span class="s1">&#39;ObjectUUID&#39;</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">ObjectIdentifierValue</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">255</span><span class="p">)</span>
    <span class="n">contentLocationType</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">IntegerField</span><span class="p">(</span><span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">contentLocationValue</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">45</span><span class="p">)</span>
    <span class="n">storageMediumUUID</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="n">storageMedium</span><span class="p">,</span> <span class="n">db_column</span><span class="o">=</span><span class="s1">&#39;storageMediumUUID&#39;</span><span class="p">,</span> <span class="n">to_field</span><span class="o">=</span><span class="s1">&#39;storageMediumUUID&#39;</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">storageMediumID</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">45</span><span class="p">)</span>
    <span class="n">LocalDBdatetime</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateTimeField</span><span class="p">(</span><span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">ExtDBdatetime</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateTimeField</span><span class="p">(</span><span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">db_table</span> <span class="o">=</span> <span class="s1">&#39;storage&#39;</span>
        <span class="n">permissions</span> <span class="o">=</span> <span class="p">(</span>
            <span class="p">(</span><span class="s2">&quot;list_storage&quot;</span><span class="p">,</span> <span class="s2">&quot;Can list storage&quot;</span><span class="p">),</span>
        <span class="p">)</span>
<span class="c1">#&quot;&quot;&quot;</span>
        
<span class="k">class</span> <span class="nc">robot</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">slot_id</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">IntegerField</span><span class="p">(</span><span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">drive_id</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">IntegerField</span><span class="p">(</span><span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">status</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">45</span><span class="p">)</span>
    <span class="n">t_id</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">6</span><span class="p">)</span>
    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">db_table</span> <span class="o">=</span> <span class="s1">&#39;robot&#39;</span>
        <span class="n">permissions</span> <span class="o">=</span> <span class="p">(</span>
            <span class="p">(</span><span class="s2">&quot;list_robot&quot;</span><span class="p">,</span> <span class="s2">&quot;Can list robot&quot;</span><span class="p">),</span>
        <span class="p">)</span>
        
<span class="k">class</span> <span class="nc">robotdrives</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">drive_id</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">IntegerField</span><span class="p">(</span><span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">t_id</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">6</span><span class="p">)</span>
    <span class="n">slot_id</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">IntegerField</span><span class="p">(</span><span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">status</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
    <span class="n">num_mounts</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">IntegerField</span><span class="p">(</span><span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">drive_dev</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>
    <span class="n">drive_type</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>
    <span class="n">drive_serial</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
    <span class="n">drive_firmware</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
    <span class="n">drive_lock</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">36</span><span class="p">)</span>
    <span class="n">IdleTime</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">IntegerField</span><span class="p">(</span><span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">db_table</span> <span class="o">=</span> <span class="s1">&#39;robotdrives&#39;</span>

<span class="k">class</span> <span class="nc">robotie</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">slot_id</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">IntegerField</span><span class="p">(</span><span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">drive_id</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">IntegerField</span><span class="p">(</span><span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">status</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
    <span class="n">t_id</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">6</span><span class="p">)</span>
    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">db_table</span> <span class="o">=</span> <span class="s1">&#39;robotie&#39;</span>

<span class="c1">#class robotreq(models.Model):</span>
<span class="c1">#    job_prio = models.IntegerField(null=True, blank=True)</span>
<span class="c1">#    status = models.CharField(max_length=10, choices=RobotReqStatus_CHOICES)</span>
<span class="c1">#    #req_type = models.CharField(max_length=10,blank=True, choices=RobotReqType_CHOICES)</span>
<span class="c1">#    req_type = models.CharField(max_length=10, choices=RobotReqType_CHOICES)</span>
<span class="c1">#    #req_type = models.CharField(choices=RobotReqType_CHOICES)</span>
<span class="c1">#    t_id = models.CharField(max_length=6,blank=True)</span>
<span class="c1">#    work_uuid = models.CharField(max_length=36,blank=True)</span>
<span class="c1">#    user = models.CharField(max_length=255,blank=True)</span>
<span class="c1">#    ReqPurpose = models.CharField(max_length=255)</span>
<span class="c1">#    class Meta:</span>
<span class="c1">#        db_table = &#39;robotreq&#39;</span>
<span class="c1">#    def get_absolute_url(self):</span>
<span class="c1">#        return reverse(&#39;admin_listrobot&#39;)</span>
<span class="c1">#        </span>
<span class="c1">#class robotReqQueueForm(forms.ModelForm):</span>
<span class="c1">#    required_css_class = &#39;required&#39;</span>
<span class="c1">#    work_uuid = forms.CharField(label=&#39;ReqUUID&#39;, required=False, widget = PlainText())</span>
<span class="c1">#    t_id = forms.CharField(label=&#39;MediumID&#39;, required=False, widget = PlainText())</span>
<span class="c1">#    status = forms.CharField(label=&#39;Status&#39;, widget = forms.HiddenInput())</span>
<span class="c1">#    user = forms.CharField(label=&#39;User&#39;, widget = PlainText())</span>
<span class="c1">#    class Meta:</span>
<span class="c1">#        model=robotreq</span>
<span class="c1">#        fields = [&#39;work_uuid&#39;, &#39;req_type&#39;, &#39;ReqPurpose&#39;, &#39;user&#39;, &#39;status&#39;, &#39;t_id&#39;]</span>
<span class="c1">#        exclude=(&#39;job_prio&#39;,)</span>
<span class="c1">#</span>
<span class="c1">#class robotReqQueueFormUpdate(robotReqQueueForm):</span>
<span class="c1">#    status = forms.ChoiceField(label=&#39;Status&#39;, choices=RobotReqStatus_CHOICES)</span>

<span class="k">class</span> <span class="nc">robotQueue</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>     
    <span class="n">ReqUUID</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">36</span><span class="p">)</span>
    <span class="n">ReqType</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">IntegerField</span><span class="p">(</span><span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">choices</span><span class="o">=</span><span class="n">RobotReqType_CHOICES</span><span class="p">)</span>
    <span class="n">ReqPurpose</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">255</span><span class="p">)</span>
    <span class="n">user</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">45</span><span class="p">)</span>
    <span class="n">password</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">45</span><span class="p">,</span><span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">MediumID</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">45</span><span class="p">,</span><span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">Status</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">IntegerField</span><span class="p">(</span><span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">choices</span><span class="o">=</span><span class="n">ReqStatus_CHOICES</span><span class="p">)</span>
    <span class="n">task_id</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">36</span><span class="p">,</span><span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">posted</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateTimeField</span><span class="p">(</span><span class="n">auto_now_add</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">db_table</span> <span class="o">=</span> <span class="s1">&#39;robotQueue&#39;</span>
        <span class="n">permissions</span> <span class="o">=</span> <span class="p">(</span>                    
            <span class="p">(</span><span class="s2">&quot;list_robotqueue&quot;</span><span class="p">,</span> <span class="s2">&quot;Can list robot queue&quot;</span><span class="p">),</span>
        <span class="p">)</span>
    <span class="k">def</span> <span class="nf">get_absolute_url</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">reverse</span><span class="p">(</span><span class="s1">&#39;admin_listrobot&#39;</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">robotQueueForm</span><span class="p">(</span><span class="n">forms</span><span class="o">.</span><span class="n">ModelForm</span><span class="p">):</span>
    <span class="n">required_css_class</span> <span class="o">=</span> <span class="s1">&#39;required&#39;</span>
    <span class="n">ReqUUID</span> <span class="o">=</span> <span class="n">forms</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s1">&#39;ReqUUID&#39;</span><span class="p">,</span> <span class="n">widget</span> <span class="o">=</span> <span class="n">PlainText</span><span class="p">())</span>
    <span class="n">Status</span> <span class="o">=</span> <span class="n">forms</span><span class="o">.</span><span class="n">IntegerField</span><span class="p">(</span><span class="n">widget</span> <span class="o">=</span> <span class="n">forms</span><span class="o">.</span><span class="n">HiddenInput</span><span class="p">())</span>
    <span class="n">user</span> <span class="o">=</span> <span class="n">forms</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s1">&#39;User&#39;</span><span class="p">,</span> <span class="n">widget</span> <span class="o">=</span> <span class="n">PlainText</span><span class="p">())</span>
    <span class="n">task_id</span> <span class="o">=</span> <span class="n">forms</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">required</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">widget</span> <span class="o">=</span> <span class="n">PlainText</span><span class="p">())</span>
    <span class="n">ais_flag</span> <span class="o">=</span> <span class="n">forms</span><span class="o">.</span><span class="n">BooleanField</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s1">&#39;Update related objects from AIS&#39;</span><span class="p">,</span><span class="n">required</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">model</span><span class="o">=</span><span class="n">robotQueue</span>   
        <span class="n">exclude</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;password&#39;</span><span class="p">,)</span>    

<span class="k">class</span> <span class="nc">robotQueueFormUpdate</span><span class="p">(</span><span class="n">robotQueueForm</span><span class="p">):</span>
    <span class="n">Status</span> <span class="o">=</span> <span class="n">forms</span><span class="o">.</span><span class="n">ChoiceField</span><span class="p">(</span><span class="n">choices</span><span class="o">=</span><span class="n">ReqStatus_CHOICES</span><span class="p">)</span>  
        
<span class="c1">###########################################################################</span>
<span class="c1">#</span>
<span class="c1"># Migration models and forms</span>
<span class="c1">#</span>
<span class="k">class</span> <span class="nc">MigrationQueue</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>     
    <span class="n">ReqUUID</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">36</span><span class="p">)</span>
    <span class="n">ReqType</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">IntegerField</span><span class="p">(</span><span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">choices</span><span class="o">=</span><span class="n">MigrationReqType_CHOICES</span><span class="p">)</span>
    <span class="n">ReqPurpose</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">255</span><span class="p">)</span>
    <span class="n">user</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">45</span><span class="p">)</span>
    <span class="n">password</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">45</span><span class="p">,</span><span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">ObjectIdentifierValue</span> <span class="o">=</span> <span class="n">PickledObjectField</span><span class="p">()</span>
    <span class="n">TargetMediumID</span> <span class="o">=</span> <span class="n">PickledObjectField</span><span class="p">()</span>
    <span class="n">Status</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">IntegerField</span><span class="p">(</span><span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">choices</span><span class="o">=</span><span class="n">ReqStatus_CHOICES</span><span class="p">)</span>
    <span class="n">Path</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">255</span><span class="p">)</span>
    <span class="n">CopyPath</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">255</span><span class="p">,</span><span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">CopyOnlyFlag</span> <span class="o">=</span>  <span class="n">models</span><span class="o">.</span><span class="n">BooleanField</span><span class="p">(</span><span class="n">default</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span>
    <span class="n">task_id</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">36</span><span class="p">,</span><span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="c1">#task_id = models.ForeignKey(TaskMeta, db_column=&#39;task_id&#39;, to_field=&#39;task_id&#39;, null=True, blank=True)</span>
    <span class="n">posted</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateTimeField</span><span class="p">(</span><span class="n">auto_now_add</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">db_table</span> <span class="o">=</span> <span class="s1">&#39;MigrationQueue&#39;</span>
        <span class="n">permissions</span> <span class="o">=</span> <span class="p">(</span>                    
            <span class="p">(</span><span class="s2">&quot;list_migrationqueue&quot;</span><span class="p">,</span> <span class="s2">&quot;Can list migration queue&quot;</span><span class="p">),</span>
        <span class="p">)</span>
    <span class="k">def</span> <span class="nf">get_absolute_url</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">reverse</span><span class="p">(</span><span class="s1">&#39;migration_list&#39;</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">MigrationQueueForm</span><span class="p">(</span><span class="n">forms</span><span class="o">.</span><span class="n">ModelForm</span><span class="p">):</span>
    <span class="n">required_css_class</span> <span class="o">=</span> <span class="s1">&#39;required&#39;</span>
    <span class="c1">#ReqUUID = forms.CharField(label=&#39;ReqUUID&#39;, widget = forms.TextInput(attrs={&#39;readonly&#39;:&#39;readonly&#39;}))</span>
    <span class="n">ReqUUID</span> <span class="o">=</span> <span class="n">forms</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s1">&#39;ReqUUID&#39;</span><span class="p">,</span> <span class="n">widget</span> <span class="o">=</span> <span class="n">PlainText</span><span class="p">())</span>
    <span class="c1">#ReqType = forms.ChoiceField(label=&#39;ReqType&#39;, choices=ReqType_CHOICES , widget = forms.CheckboxInput(attrs={&#39;disabled&#39;:&#39;disabled&#39;}))</span>
    <span class="c1">#ReqType = forms.ChoiceField(label=&#39;ReqType&#39;, choices=ReqType_CHOICES , widget = forms.Select(attrs={&#39;disabled&#39;:&#39;disabled&#39;}))</span>
    <span class="c1">#ReqType = forms.ChoiceField(label=&#39;ReqType&#39;, choices=ReqType_CHOICES , widget = PlainText())</span>
    <span class="n">ObjectIdentifierValue</span> <span class="o">=</span> <span class="n">forms</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">widget</span><span class="o">=</span><span class="n">forms</span><span class="o">.</span><span class="n">Textarea</span><span class="p">())</span>
    <span class="n">TargetMediumID</span> <span class="o">=</span> <span class="n">forms</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">widget</span><span class="o">=</span><span class="n">forms</span><span class="o">.</span><span class="n">Textarea</span><span class="p">())</span>
    <span class="n">CopyOnlyFlag</span> <span class="o">=</span> <span class="n">forms</span><span class="o">.</span><span class="n">BooleanField</span><span class="p">(</span><span class="n">widget</span><span class="o">=</span><span class="n">forms</span><span class="o">.</span><span class="n">CheckboxInput</span><span class="p">(),</span> <span class="n">required</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">initial</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">Status</span> <span class="o">=</span> <span class="n">forms</span><span class="o">.</span><span class="n">IntegerField</span><span class="p">(</span><span class="n">widget</span> <span class="o">=</span> <span class="n">forms</span><span class="o">.</span><span class="n">HiddenInput</span><span class="p">())</span>
    <span class="n">user</span> <span class="o">=</span> <span class="n">forms</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s1">&#39;User&#39;</span><span class="p">,</span> <span class="n">widget</span> <span class="o">=</span> <span class="n">PlainText</span><span class="p">())</span>
<span class="c1">#    def clean_Path(self):</span>
<span class="c1">#        data = self.cleaned_data[&#39;Path&#39;]</span>
<span class="c1">#        print data</span>
<span class="c1">#        if not data == &#39;hej0077&#39;:</span>
<span class="c1">#            raise forms.ValidationError(&quot;Wrong Path2222&quot;)</span>
<span class="c1">#        return data</span>
<span class="c1">#    def clean(self):</span>
<span class="c1">#        cleaned_data = super(AccessQueueForm, self).clean()</span>
<span class="c1">#        Path = cleaned_data.get(&#39;Path&#39;)</span>
<span class="c1">#        if not Path == &#39;hej007&#39;:</span>
<span class="c1">#            msg = u&quot;Wrong path!&quot;</span>
<span class="c1">#            self._errors[&quot;Path&quot;] = self.error_class([msg])</span>
<span class="c1">#        del cleaned_data[&#39;Path&#39;]</span>
<span class="c1">#        print &#39;dir cleaned_data: %s&#39; % dir(cleaned_data)</span>
<span class="c1">#        print &#39;cleaned_data: %s&#39; % cleaned_data</span>
<span class="c1">#        return cleaned_data</span>

    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">model</span><span class="o">=</span><span class="n">MigrationQueue</span>   
        <span class="n">exclude</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;password&#39;</span><span class="p">,)</span>    

<span class="k">class</span> <span class="nc">MigrationQueueFormUpdate</span><span class="p">(</span><span class="n">MigrationQueueForm</span><span class="p">):</span>
    <span class="n">Status</span> <span class="o">=</span> <span class="n">forms</span><span class="o">.</span><span class="n">ChoiceField</span><span class="p">(</span><span class="n">choices</span><span class="o">=</span><span class="n">ReqStatus_CHOICES</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">DeactivateMediaForm</span><span class="p">(</span><span class="n">forms</span><span class="o">.</span><span class="n">Form</span><span class="p">):</span>
    <span class="n">ReqPurpose</span> <span class="o">=</span> <span class="n">forms</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">255</span><span class="p">)</span>
    <span class="n">MediumList</span> <span class="o">=</span> <span class="n">forms</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">widget</span><span class="o">=</span><span class="n">forms</span><span class="o">.</span><span class="n">Textarea</span><span class="p">())</span>
    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">model</span><span class="o">=</span><span class="n">MigrationQueue</span> 
</pre></div>

          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../index.html">Documentation overview</a><ul>
  <li><a href="../index.html">Module code</a><ul>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2017, ES Solutions.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.5.2</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.9</a>
      
    </div>

    

    
  </body>
</html>